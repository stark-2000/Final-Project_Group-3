<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: two_wheel_robot_line_formation.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">two_wheel_robot_line_formation.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a node which performs line formation of the swarm robots using linear fitting algorithm which basically uses 2 feedback vectors to allign the N robots in a line.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;gazebo_msgs/SetJointProperties.h&gt;</code><br />
<code>#include &lt;ros/ros.h&gt;</code><br />
<code>#include &lt;swarm_robot_msg/two_wheel_robot.h&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;numeric&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for two_wheel_robot_line_formation.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="two__wheel__robot__line__formation_8cpp__incl.png" border="0" usemap="#two__wheel__robot__line__formation_8cpp" alt=""/></div>
<map name="two__wheel__robot__line__formation_8cpp" id="two__wheel__robot__line__formation_8cpp">
<area shape="rect" title="This is a node which performs line formation of the swarm robots using linear fitting algorithm which..." alt="" coords="630,5,794,47"/>
<area shape="rect" title=" " alt="" coords="5,102,248,129"/>
<area shape="rect" title=" " alt="" coords="273,102,351,129"/>
<area shape="rect" title=" " alt="" coords="376,95,547,136"/>
<area shape="rect" title=" " alt="" coords="571,102,656,129"/>
<area shape="rect" title=" " alt="" coords="681,102,743,129"/>
<area shape="rect" title=" " alt="" coords="768,102,843,129"/>
<area shape="rect" title=" " alt="" coords="867,102,947,129"/>
<area shape="rect" title=" " alt="" coords="971,102,1045,129"/>
<area shape="rect" title=" " alt="" coords="1070,102,1133,129"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8e6e9ba02f00a79bd214b842e2a7fa02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a8e6e9ba02f00a79bd214b842e2a7fa02">twoWheelRobotCallback</a> (const swarm_robot_msg::two_wheel_robot &amp;input_msg)</td></tr>
<tr class="memdesc:a8e6e9ba02f00a79bd214b842e2a7fa02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for callback for getting robot information.  <a href="two__wheel__robot__line__formation_8cpp.html#a8e6e9ba02f00a79bd214b842e2a7fa02">More...</a><br /></td></tr>
<tr class="separator:a8e6e9ba02f00a79bd214b842e2a7fa02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf197f973c9edcca9610fba8b86df471"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#aaf197f973c9edcca9610fba8b86df471">intToString</a> (int a)</td></tr>
<tr class="memdesc:aaf197f973c9edcca9610fba8b86df471"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to convert int to string.  <a href="two__wheel__robot__line__formation_8cpp.html#aaf197f973c9edcca9610fba8b86df471">More...</a><br /></td></tr>
<tr class="separator:aaf197f973c9edcca9610fba8b86df471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6c6873303e40c711bf3398e7f81810"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#afd6c6873303e40c711bf3398e7f81810">getSign</a> (double x)</td></tr>
<tr class="memdesc:afd6c6873303e40c711bf3398e7f81810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to compare and return sign of a number provided as arguement.  <a href="two__wheel__robot__line__formation_8cpp.html#afd6c6873303e40c711bf3398e7f81810">More...</a><br /></td></tr>
<tr class="separator:afd6c6873303e40c711bf3398e7f81810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5cc123af9de7815ebbbfc9661435704"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#ae5cc123af9de7815ebbbfc9661435704">linear_fitting</a> (const std::vector&lt; double &gt; &amp;x, const std::vector&lt; double &gt; &amp;y)</td></tr>
<tr class="memdesc:ae5cc123af9de7815ebbbfc9661435704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Linear fitting algorithm as referred from wiki and custom implementation.  <a href="two__wheel__robot__line__formation_8cpp.html#ae5cc123af9de7815ebbbfc9661435704">More...</a><br /></td></tr>
<tr class="separator:ae5cc123af9de7815ebbbfc9661435704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function which initialises ROS, receives command line arguement and executes data receiving from robots, current state, robot pose, velocity publishing feedback vector calc, fitting line calc and publishing data to robots.  <a href="two__wheel__robot__line__formation_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a84191fe4f021e2a9583c23c2dbc9383f"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a84191fe4f021e2a9583c23c2dbc9383f">TOPIC_ACTIVE_PERIOD</a></td></tr>
<tr class="memdesc:a84191fe4f021e2a9583c23c2dbc9383f"><td class="mdescLeft">&#160;</td><td class="mdescRight">threshold to tell if a topic is active  <a href="two__wheel__robot__line__formation_8cpp.html#a84191fe4f021e2a9583c23c2dbc9383f">More...</a><br /></td></tr>
<tr class="separator:a84191fe4f021e2a9583c23c2dbc9383f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba10a38b637ee5350f299e5f5319bcdc"><td class="memItemLeft" align="right" valign="top"><a id="aba10a38b637ee5350f299e5f5319bcdc"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><b>CONTROL_PERIOD</b> = 0.001</td></tr>
<tr class="separator:aba10a38b637ee5350f299e5f5319bcdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a730ff661cbea839b33fe3ea95dd2f241"><td class="memItemLeft" align="right" valign="top"><a id="a730ff661cbea839b33fe3ea95dd2f241"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>spring_length</b> = 0.7</td></tr>
<tr class="separator:a730ff661cbea839b33fe3ea95dd2f241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0febf68f994b88c7fbf50da50e29ef"><td class="memItemLeft" align="right" valign="top"><a id="a3c0febf68f994b88c7fbf50da50e29ef"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a3c0febf68f994b88c7fbf50da50e29ef">sensing_range</a> = 2.0</td></tr>
<tr class="memdesc:a3c0febf68f994b88c7fbf50da50e29ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">sensing range for neighbouring robots <br /></td></tr>
<tr class="separator:a3c0febf68f994b88c7fbf50da50e29ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf7f028ce0e2dca9e5a26f0d335b39f"><td class="memItemLeft" align="right" valign="top"><a id="abaf7f028ce0e2dca9e5a26f0d335b39f"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#abaf7f028ce0e2dca9e5a26f0d335b39f">PERPENDICULAR_PERCENTAGE</a> = 0.1</td></tr>
<tr class="memdesc:abaf7f028ce0e2dca9e5a26f0d335b39f"><td class="mdescLeft">&#160;</td><td class="mdescRight">For fusing two feedback. <br /></td></tr>
<tr class="separator:abaf7f028ce0e2dca9e5a26f0d335b39f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169f549d0349f1ed2a89242a7893b82b"><td class="memItemLeft" align="right" valign="top"><a id="a169f549d0349f1ed2a89242a7893b82b"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><b>PARALLEL_PERCENTAGE</b> = 1.0 - <a class="el" href="two__wheel__robot__line__formation_8cpp.html#abaf7f028ce0e2dca9e5a26f0d335b39f">PERPENDICULAR_PERCENTAGE</a></td></tr>
<tr class="separator:a169f549d0349f1ed2a89242a7893b82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab379edf40b95b724a2890d01addb27e"><td class="memItemLeft" align="right" valign="top"><a id="aab379edf40b95b724a2890d01addb27e"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#aab379edf40b95b724a2890d01addb27e">VEL_RATIO</a> = 50.0</td></tr>
<tr class="memdesc:aab379edf40b95b724a2890d01addb27e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ratio of wheel velocity to feedback vector. <br /></td></tr>
<tr class="separator:aab379edf40b95b724a2890d01addb27e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a071e4acfacbadae49f2e383d9654c70a"><td class="memItemLeft" align="right" valign="top"><a id="a071e4acfacbadae49f2e383d9654c70a"></a>
const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a071e4acfacbadae49f2e383d9654c70a">LEFT_WHEEL_POSITION</a> = -0.0157</td></tr>
<tr class="memdesc:a071e4acfacbadae49f2e383d9654c70a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left wheel position - negative. <br /></td></tr>
<tr class="separator:a071e4acfacbadae49f2e383d9654c70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c74a9c96fd6984684d9804e7d52d43d"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#a6c74a9c96fd6984684d9804e7d52d43d">RIGHT_WHEEL_POSITION</a></td></tr>
<tr class="memdesc:a6c74a9c96fd6984684d9804e7d52d43d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Right wheel position - positive.  <a href="two__wheel__robot__line__formation_8cpp.html#a6c74a9c96fd6984684d9804e7d52d43d">More...</a><br /></td></tr>
<tr class="separator:a6c74a9c96fd6984684d9804e7d52d43d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604e528f6b789621dd857c667e87955a"><td class="memItemLeft" align="right" valign="top"><a id="a604e528f6b789621dd857c667e87955a"></a>
swarm_robot_msg::two_wheel_robot&#160;</td><td class="memItemRight" valign="bottom"><b>current_robots</b></td></tr>
<tr class="separator:a604e528f6b789621dd857c667e87955a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad559ddef8414e23a0043c5423c239b71"><td class="memItemLeft" align="right" valign="top">ros::Time&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="two__wheel__robot__line__formation_8cpp.html#ad559ddef8414e23a0043c5423c239b71">two_wheel_robot_topic_timer</a></td></tr>
<tr class="separator:ad559ddef8414e23a0043c5423c239b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a node which performs line formation of the swarm robots using linear fitting algorithm which basically uses 2 feedback vectors to allign the N robots in a line. </p>
<dl class="section author"><dt>Author</dt><dd>Dhinesh Rajasekaran, Arshad Shaik </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2022-12-08</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2022 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afd6c6873303e40c711bf3398e7f81810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6c6873303e40c711bf3398e7f81810">&#9670;&nbsp;</a></span>getSign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getSign </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to compare and return sign of a number provided as arguement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Data to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 or -1 </dd></dl>
<p>&lt; Return sign of a number, used to decide relative position of a point and a line</p>

</div>
</div>
<a id="aaf197f973c9edcca9610fba8b86df471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf197f973c9edcca9610fba8b86df471">&#9670;&nbsp;</a></span>intToString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string intToString </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to convert int to string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Data to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ss </dd></dl>

</div>
</div>
<a id="ae5cc123af9de7815ebbbfc9661435704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cc123af9de7815ebbbfc9661435704">&#9670;&nbsp;</a></span>linear_fitting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; linear_fitting </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Linear fitting algorithm as referred from wiki and custom implementation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Robot x position </td></tr>
    <tr><td class="paramname">y</td><td>Robot y position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a </dd></dl>
<p>&lt; linear fitting function, revised from C++11 implementation</p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function which initialises ROS, receives command line arguement and executes data receiving from robots, current state, robot pose, velocity publishing feedback vector calc, fitting line calc and publishing data to robots. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>stores the no of arguements to send &amp; receive in command line </td></tr>
    <tr><td class="paramname">argv</td><td>stores the actual arguement data to send and receive in command line </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero </dd></dl>
<p>&lt; handshake with robot name in parameter server</p>
<p>&lt; get the settings for this simulation from private parameter</p>
<p>&lt; delete parameter</p>
<p>&lt; get sensing range</p>
<p>&lt; instantiate a subscriber to topic "/swarm_sim/two_wheel_robot"</p>
<p>&lt; instantiate a service client for "/gazebo/set_joint_properties"</p>
<p>&lt; in case of segmentation error</p>
<p>&lt; line formation loop</p>
<p>&lt; use to control loop rate</p>
<p>&lt; stop all robots for one time when topic is inactive</p>
<p>&lt; check if two wheel robot topic is active</p>
<p>&lt; the topic is been actively published ROS_WARN("topic is active");</p>
<p>&lt; whether to print debug msg elsewhere</p>
<p>&lt; at least 10 counts when averaging frequency</p>
<p>&lt; interval should also be bigger than 1.0 sec</p>
<p>&lt; reset loop count</p>
<p>&lt; update last timer</p>
<p>&lt; set the stop_all_robot_once flag, prepare when topic out of active state</p>
<p>&lt; 1)calculate distance between any two robots</p>
<p>&lt; 3)initialize distance_sort and index_sort</p>
<p>&lt; bubble from back to front to pop up the smaller ones</p>
<p>&lt; switch between these two distances</p>
<p>&lt; Print out number of neighbors in sensing range</p>
<p>&lt; print multiple colomns in the terminal</p>
<p>&lt; increment by 1 first thing in the loop</p>
<p>&lt; robot count</p>
<p>&lt; colomn control</p>
<p>&lt; store the fitting result</p>
<p>&lt; neighbors plus itself</p>
<p>&lt; the slope</p>
<p>&lt; the intercept</p>
<p>&lt; in x and y directions</p>
<p>&lt; slope intercept form, k and b are known parameters the perpendicular vector is [-k/(1+k^2)*(kx+b-y), 1/(1+k^2)*(kx+b-y)] with x and y being robot position</p>
<p>&lt; initialize the distances with negative number</p>
<p>&lt; calculate the signed distance, left is negative, right is positive</p>
<p>&lt; neighbor robot on the left</p>
<p>&lt; not overwrite with a value yet</p>
<p>&lt; there is a closer neighbor at left side</p>
<p>&lt; neighbor robot on the right</p>
<p>&lt; not overwrite with a value yet</p>
<p>&lt; there is a closer neighbor at right side</p>
<p>&lt; signed distance equals 0, should not be here</p>
<p>&lt; the spring effect of both sides</p>
<p>&lt; robot has an effective neighbor at left side, left is negative</p>
<p>&lt; robot has an effective neighbor at right side, right is positive</p>
<p>&lt; calculate feedback vector based on robot side</p>
<p>&lt; robot is at bottom side of fitted line</p>
<p>&lt; robot is exactly on the fitted line, should not be here</p>
<p>&lt; vel of left and right wheels</p>
<p>&lt; relative angle between the feedback vector and the robot orientation</p>
<p>&lt; both feedback vector direction and robot orientation are in range of [-M_PI, M_PI]</p>
<p>&lt; the difference is in range of [-2*M_PI, 2*M_PI], will convert to [-M_PI, M_PI]</p>
<p>&lt; now we have relative direction and length of feedback vector next step is converting them to wheel rotation center and rotation direction wheel rotation center is on the axis of two rotation wheels left side is negative, right side is positive rotation direction is either ccw or cw, relative to wheel rotation center divide relative direction into four quarters</p>
<p>&lt; going forward and rotate ccw, rotation center at left side</p>
<p>&lt; the velocity of the center of the robot: feedback_vector_length[i] * VEL_RATIO left wheel velocity</p>
<p>&lt; right wheel velocity</p>
<p>&lt; going backward and rotate cw, rotation center at left side</p>
<p>&lt; wheel velocities</p>
<p>&lt; going forward and rotate cw, rotation center at right side</p>
<p>&lt; wheel velocities</p>
<p>&lt; going backward and rotate ccw, rotation center at right side</p>
<p>&lt; wheel velocities</p>
<p>&lt; very unlikely here, just in case</p>
<p>&lt; wheel velocities</p>
<p>&lt; very unlikely here, just in case</p>
<p>&lt; wheel velocities</p>
<p>&lt; left wheel</p>
<p>&lt; possibly the robot not found</p>
<p>&lt; right wheel</p>
<p>&lt; possibly the robot not found</p>
<p>&lt; the topic is not active, meaning two wheel robot manager node is down</p>
<p>&lt; set wheel velocity of all robots to zero according to last topic update</p>
<p>&lt; left wheel</p>
<p>&lt; possibly the robot not found</p>
<p>&lt; right wheel</p>
<p>&lt; possibly the robot not found</p>
<p>&lt; let the global variables update</p>

</div>
</div>
<a id="a8e6e9ba02f00a79bd214b842e2a7fa02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e6e9ba02f00a79bd214b842e2a7fa02">&#9670;&nbsp;</a></span>twoWheelRobotCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void twoWheelRobotCallback </td>
          <td>(</td>
          <td class="paramtype">const swarm_robot_msg::two_wheel_robot &amp;&#160;</td>
          <td class="paramname"><em>input_msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for callback for getting robot information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_msg</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>
<p>&lt; Callback for getting robot information:</p>
<p>&lt; Update the time stamp every time the callback is invoked</p>
<p>&lt; Update data in global variables so that it's accessible everywhere</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6c74a9c96fd6984684d9804e7d52d43d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c74a9c96fd6984684d9804e7d52d43d">&#9670;&nbsp;</a></span>RIGHT_WHEEL_POSITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double RIGHT_WHEEL_POSITION</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    0.0157</div>
</div><!-- fragment -->
<p>Right wheel position - positive. </p>

</div>
</div>
<a id="a84191fe4f021e2a9583c23c2dbc9383f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84191fe4f021e2a9583c23c2dbc9383f">&#9670;&nbsp;</a></span>TOPIC_ACTIVE_PERIOD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double TOPIC_ACTIVE_PERIOD</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    1.0</div>
</div><!-- fragment -->
<p>threshold to tell if a topic is active </p>

</div>
</div>
<a id="ad559ddef8414e23a0043c5423c239b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad559ddef8414e23a0043c5423c239b71">&#9670;&nbsp;</a></span>two_wheel_robot_topic_timer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Time two_wheel_robot_topic_timer</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Time stamp for callback, used to check topic activity </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
